---
title: 'Finalize Checkout Session'
---

import ShipmentIdField from '/snippets/api/url-parameters/shipment-id.mdx';

### Overview

This endpoint can be used to finalize a checkout session and pay for a shipment.

Endpoint: `/api/v1/checkout/{shipment_id}`

Method: `POST`

<Note>
    You must first use the `GET` endpoint so that the price may be calculated for the shipment. If you attempt to finalize a shipment that does not have a price, then you will receive an error.
</Note>

<Warning>
    This endpoint will charge the shipment's price to the organization's payment method.

    Please ensure that the shipment's details are correct, and that the addresses have been verified before finalising the checkout session.

    Failure to do so may result in delays, lost shipments, or extra charges.
</Warning>

### URL Parameters

<ShipmentIdField action="purchase"/>

### Response (204)

This response will be returned if the payment is successful. Note that the response will not contain any content. Therefore, you should check for the presence of `204` HTTP status code.

### Response (402)

This response will be returned if the payment is declined by the payment provider.

<Note>
    Receiving this response will automatically invalidate your payment method. You will need to address this via the ReturnPilot website before you can make further payment attempts.
</Note>

<ResponseField name="status" type="integer" required>
    The internal status code of the error.
</ResponseField>

<ResponseField name="message" type="string" required>
    A human-readable message explaining the error.
</ResponseField>

### Response (409)

This response will be returned if the payment fails. In most cases, this is a temporary error and you can simply retry the request.

<Note>
    It is recommended that you wait a minute or so before retrying. This increases the chance that your request will be processed successfully.
</Note>

<ResponseField name="status" type="integer" required>
    The internal status code of the error.
</ResponseField>

<ResponseField name="message" type="string" required>
    A human-readable message explaining the error.
</ResponseField>

<RequestExample>
    ```json Example Request Body Structure
    {
        "shipments": [
            125,
            126,
            127
        ]
    }
    ```
</RequestExample>

<ResponseExample>
    ```text 204
    No Content
    ```

    ```json 402
    {
        "status": 0,
        "message": "Your card was declined... check your wallet"
    }
    ```

    ```json 409
    {
        "status": 1,
        "message": "Something went wrong... please try again"
    }
    ```
</ResponseExample>

